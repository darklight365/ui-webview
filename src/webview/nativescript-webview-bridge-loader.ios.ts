//export const fetchPolyfill: string = <?= fetchPolyfill ?>;
export const promisePolyfill: string = "!function(global,factory){\"object\"==typeof exports&&\"undefined\"!=typeof module?factory():\"function\"==typeof define&&define.amd?define(factory):factory()}(0,(function(){\"use strict\";function finallyConstructor(callback){var constructor=this.constructor;return this.then((function(value){return constructor.resolve(callback()).then((function(){return value}))}),(function(reason){return constructor.resolve(callback()).then((function(){return constructor.reject(reason)}))}))}function allSettled(arr){return new this((function(resolve,reject){if(!arr||void 0===arr.length)return reject(new TypeError(typeof arr+\" \"+arr+\" is not iterable(cannot read property Symbol(Symbol.iterator))\"));var args=Array.prototype.slice.call(arr);if(0===args.length)return resolve([]);var remaining=args.length;function res(i,val){if(val&&(\"object\"==typeof val||\"function\"==typeof val)){var then=val.then;if(\"function\"==typeof then)return void then.call(val,(function(val){res(i,val)}),(function(e){args[i]={status:\"rejected\",reason:e},0==--remaining&&resolve(args)}))}args[i]={status:\"fulfilled\",value:val},0==--remaining&&resolve(args)}for(var i=0;i<args.length;i++)res(i,args[i])}))}var setTimeoutFunc=setTimeout;function isArray(x){return Boolean(x&&void 0!==x.length)}function noop(){}function Promise(fn){if(!(this instanceof Promise))throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof fn)throw new TypeError(\"not a function\");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(fn,this)}function handle(self,deferred){for(;3===self._state;)self=self._value;0!==self._state?(self._handled=!0,Promise._immediateFn((function(){var cb=1===self._state?deferred.onFulfilled:deferred.onRejected;if(null!==cb){var ret;try{ret=cb(self._value)}catch(e){return void reject(deferred.promise,e)}resolve(deferred.promise,ret)}else(1===self._state?resolve:reject)(deferred.promise,self._value)}))):self._deferreds.push(deferred)}function resolve(self,newValue){try{if(newValue===self)throw new TypeError(\"A promise cannot be resolved with itself.\");if(newValue&&(\"object\"==typeof newValue||\"function\"==typeof newValue)){var then=newValue.then;if(newValue instanceof Promise)return self._state=3,self._value=newValue,void finale(self);if(\"function\"==typeof then)return void doResolve((fn=then,thisArg=newValue,function(){fn.apply(thisArg,arguments)}),self)}self._state=1,self._value=newValue,finale(self)}catch(e){reject(self,e)}var fn,thisArg}function reject(self,newValue){self._state=2,self._value=newValue,finale(self)}function finale(self){2===self._state&&0===self._deferreds.length&&Promise._immediateFn((function(){self._handled||Promise._unhandledRejectionFn(self._value)}));for(var i=0,len=self._deferreds.length;i<len;i++)handle(self,self._deferreds[i]);self._deferreds=null}function Handler(onFulfilled,onRejected,promise){this.onFulfilled=\"function\"==typeof onFulfilled?onFulfilled:null,this.onRejected=\"function\"==typeof onRejected?onRejected:null,this.promise=promise}function doResolve(fn,self){var done=!1;try{fn((function(value){done||(done=!0,resolve(self,value))}),(function(reason){done||(done=!0,reject(self,reason))}))}catch(ex){if(done)return;done=!0,reject(self,ex)}}Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);return handle(this,new Handler(onFulfilled,onRejected,prom)),prom},Promise.prototype.finally=finallyConstructor,Promise.all=function(arr){return new Promise((function(resolve,reject){if(!isArray(arr))return reject(new TypeError(\"Promise.all accepts an array\"));var args=Array.prototype.slice.call(arr);if(0===args.length)return resolve([]);var remaining=args.length;function res(i,val){try{if(val&&(\"object\"==typeof val||\"function\"==typeof val)){var then=val.then;if(\"function\"==typeof then)return void then.call(val,(function(val){res(i,val)}),reject)}args[i]=val,0==--remaining&&resolve(args)}catch(ex){reject(ex)}}for(var i=0;i<args.length;i++)res(i,args[i])}))},Promise.allSettled=allSettled,Promise.resolve=function(value){return value&&\"object\"==typeof value&&value.constructor===Promise?value:new Promise((function(resolve){resolve(value)}))},Promise.reject=function(value){return new Promise((function(resolve,reject){reject(value)}))},Promise.race=function(arr){return new Promise((function(resolve,reject){if(!isArray(arr))return reject(new TypeError(\"Promise.race accepts an array\"));for(var i=0,len=arr.length;i<len;i++)Promise.resolve(arr[i]).then(resolve,reject)}))},Promise._immediateFn=\"function\"==typeof setImmediate&&function(fn){setImmediate(fn)}||function(fn){setTimeoutFunc(fn,0)},Promise._unhandledRejectionFn=function(err){\"undefined\"!=typeof console&&console&&console.warn(\"Possible Unhandled Promise Rejection:\",err)};var globalNS=function(){if(\"undefined\"!=typeof self)return self;if(\"undefined\"!=typeof window)return window;if(\"undefined\"!=typeof global)return global;throw new Error(\"unable to locate global object\")}();\"function\"!=typeof globalNS.Promise?globalNS.Promise=Promise:globalNS.Promise.prototype.finally?globalNS.Promise.allSettled||(globalNS.Promise.allSettled=allSettled):globalNS.Promise.prototype.finally=finallyConstructor}));";
export const webViewBridge: string = "/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){if(\"function\"!=typeof b&&null!==b)throw new TypeError(\"Class extends value \"+String(b)+\" is not a constructor or null\");function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},\"function\"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError(\"Generator is already executing.\");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}Object.entries||(Object.entries=function(obj){for(var ownProps=Object.keys(obj),i=ownProps.length,resArray=new Array(i);i--;)resArray[i]=[ownProps[i],obj[ownProps[i]]];return resArray});var NSWebViewBridgeBase=function(){function NSWebViewBridgeBase(){this.eventListenerMap={}}return NSWebViewBridgeBase.prototype.onNativeEvent=function(eventName,data){var events=this.eventListenerMap[eventName];if(null==events?void 0:events.length)for(var _i=0,events_1=events;_i<events_1.length;_i++){var listener=events_1[_i];if(!1===(listener&&listener(data)))break}},NSWebViewBridgeBase.prototype.on=function(eventName,callback){callback&&(this.eventListenerMap[eventName]||(this.eventListenerMap[eventName]=[]),this.eventListenerMap[eventName].push(callback))},NSWebViewBridgeBase.prototype.addEventListener=function(eventName,callback){this.on(eventName,callback)},NSWebViewBridgeBase.prototype.off=function(eventName,callback){eventName?this.eventListenerMap[eventName]&&(callback?(this.eventListenerMap[eventName]=this.eventListenerMap[eventName].filter((function(oldCallback){return oldCallback!==callback})),0===this.eventListenerMap[eventName].length&&delete this.eventListenerMap[eventName]):delete this.eventListenerMap[eventName]):this.eventListenerMap={}},NSWebViewBridgeBase.prototype.removeEventListener=function(eventName,callback){return this.off(eventName,callback)},NSWebViewBridgeBase.prototype.emit=function(eventName,data){this.emitEvent(eventName,JSON.stringify(data))},NSWebViewBridgeBase.prototype.injectJavaScriptFile=function(href){var _this=this,elId=this.elementIdFromHref(href);return document.getElementById(elId)?(console.log(elId+\" already exists\"),Promise.resolve()):new Promise((function(resolve,reject){var scriptElement=document.createElement(\"script\");scriptElement.async=!0,scriptElement.setAttribute(\"id\",elId),scriptElement.addEventListener(\"error\",(function(error){console.error(\"Failed to load \"+href+\" - error: \"+error),reject(_this.serializeError(error)),scriptElement.parentElement&&scriptElement.parentElement.removeChild(scriptElement)})),scriptElement.addEventListener(\"load\",(function(){console.info(\"Loaded \"+href),window.requestAnimationFrame((function(){resolve()})),scriptElement.parentElement&&scriptElement.parentElement.removeChild(scriptElement)})),scriptElement.src=href,document.body.appendChild(scriptElement)}))},NSWebViewBridgeBase.prototype.injectJavaScript=function(elId,scriptCode){return document.getElementById(elId)?(console.log(elId+\" already exists\"),Promise.resolve()):new Promise((function(resolve,reject){var scriptElement=document.createElement(\"script\");scriptElement.setAttribute(\"id\",elId),scriptElement.addEventListener(\"error\",(function(error){console.error(\"Failed to inject javascript- error: \"+error),reject(error),scriptElement.parentElement&&scriptElement.parentElement.removeChild(scriptElement)})),scriptElement.text=scriptCode,document.body.appendChild(scriptElement),window.requestAnimationFrame((function(){return resolve()}))}))},NSWebViewBridgeBase.prototype.injectStyleSheetFile=function(href,insertBefore){var elId=this.elementIdFromHref(href);return document.getElementById(elId)?(console.log(elId+\" already exists\"),Promise.resolve()):new Promise((function(resolve,reject){var linkElement=document.createElement(\"link\");linkElement.addEventListener(\"error\",(function(error){console.error(\"Failed to load \"+href+\" - error: \"+error),reject(error),linkElement.parentElement&&linkElement.parentElement.removeChild(linkElement)})),linkElement.addEventListener(\"load\",(function(){console.info(\"Loaded \"+href),window.requestAnimationFrame((function(){resolve()}))})),linkElement.setAttribute(\"id\",elId),linkElement.setAttribute(\"rel\",\"stylesheet\"),linkElement.setAttribute(\"type\",\"text/css\"),linkElement.setAttribute(\"href\",href),document.head&&(insertBefore&&document.head.childElementCount>0?document.head.insertBefore(linkElement,document.head.firstElementChild):document.head.appendChild(linkElement))}))},NSWebViewBridgeBase.prototype.injectStyleSheet=function(elId,stylesheet,insertBefore){return document.getElementById(elId)?(console.log(elId+\" already exists\"),Promise.resolve()):new Promise((function(resolve,reject){var _a,styleElement=document.createElement(\"style\");styleElement.addEventListener(\"error\",reject),styleElement.textContent=stylesheet,styleElement.setAttribute(\"id\",elId);var parentElement=null!==(_a=document.head)&&void 0!==_a?_a:document.body;parentElement?(insertBefore&&parentElement.childElementCount>0?document.head.insertBefore(styleElement,parentElement.firstElementChild):document.head.appendChild(styleElement),resolve()):reject(new Error(\"Couldn't find parent element\"))}))},NSWebViewBridgeBase.prototype.executePromise=function(promise,eventName){return __awaiter(this,void 0,void 0,(function(){var data,err_1;return __generator(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,promise];case 1:return data=_a.sent(),this.emit(eventName,{data:data}),[3,3];case 2:return err_1=_a.sent(),this.emitError(err_1,eventName),[3,3];case 3:return[2]}}))}))},NSWebViewBridgeBase.prototype.emitError=function(err,eventName){void 0===eventName&&(eventName=\"web-error\"),\"object\"==typeof err&&(null==err?void 0:err.message)?this.emit(eventName,{err:this.serializeError(err)}):this.emit(eventName,{err:err})},NSWebViewBridgeBase.prototype.elementIdFromHref=function(href){return href.replace(/^[:]*:\\/\\//,\"\").replace(/[^a-z0-9]/g,\"\")},NSWebViewBridgeBase.prototype.serializeError=function(error){for(var res={name:error.name,message:error.message,stack:error.stack},_i=0,_a=Object.entries(error);_i<_a.length;_i++){var _b=_a[_i],key=_b[0],value=_b[1];value instanceof HTMLElement||(key in res||(res[key]=value))}return res},NSWebViewBridgeBase}();function getWkWebViewMessageHandler(){var _a,_b,w=window;if(null===(_b=null===(_a=null==w?void 0:w.webkit)||void 0===_a?void 0:_a.messageHandlers)||void 0===_b?void 0:_b.nsBridge)return w.webkit.messageHandlers.nsBridge;console.error(\"Cannot get the window.webkit.messageHandlers.nsBridge - we can't communicate with native-layer\")}Object.keys||(Object.keys=function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable(\"toString\"),dontEnums=[\"toString\",\"toLocaleString\",\"valueOf\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"constructor\"],dontEnumsLength=dontEnums.length;return function(obj){if(\"function\"!=typeof obj&&(\"object\"!=typeof obj||null===obj))throw new TypeError(\"Object.keys called on non-object\");var result=new Array;for(var prop in obj)hasOwnProperty.call(obj,prop)&&result.push(prop);if(hasDontEnumBug)for(var i=0;i<dontEnumsLength;i++)hasOwnProperty.call(obj,dontEnums[i])&&result.push(dontEnums[i]);return result}}());var NSWebViewBridge=function(_super){function NSWebViewBridge(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(NSWebViewBridge,_super),NSWebViewBridge.prototype.emitEvent=function(eventName,data){var messageHandler=getWkWebViewMessageHandler();messageHandler?messageHandler.postMessage(JSON.stringify({eventName:eventName,data:data})):console.error(\"NSWebViewBridge only supports WKWebView\")},NSWebViewBridge}(NSWebViewBridgeBase),nsBridgeReadyEventName=\"ns-bridge-ready\",w=window;if(!w.nsWebViewBridge){w.nsWebViewBridge=new NSWebViewBridge;for(var _i=0,_a=[nsBridgeReadyEventName,\"ns-brige-ready\"];_i<_a.length;_i++){var eventName=_a[_i];\"undefined\"!=typeof CustomEvent?window.dispatchEvent(new CustomEvent(eventName,{detail:w.nsWebViewBridge})):window.dispatchEvent(new Event(eventName))}}";
export const metadataViewPort: string = "!function(window){var defaultViewPort={initialScale:1},document=window.document,meta=document.querySelector('head meta[name=\"viewport\"]');meta||((meta=document.createElement(\"meta\")).setAttribute(\"name\",\"viewport\"),document.head.appendChild(meta));var viewPortValues=\"<%= VIEW_PORT %>\";viewPortValues&&\"string\"!=typeof viewPortValues||(viewPortValues=defaultViewPort);var _a=viewPortValues.initialScale,initialScale=void 0===_a?defaultViewPort.initialScale:_a,width=viewPortValues.width,height=viewPortValues.height,userScalable=viewPortValues.userScalable,minimumScale=viewPortValues.minimumScale,maximumScale=viewPortValues.maximumScale,content=[\"initial-scale=\"+initialScale];if(width&&content.push(\"width=\"+width),height&&content.push(\"height=\"+height),\"boolean\"==typeof userScalable)content.push(\"user-scalable=\"+(userScalable?\"yes\":\"no\"));else if(\"string\"==typeof userScalable){var lcUserScalable=(\"\"+userScalable).toLowerCase();\"yes\"===lcUserScalable?content.push(\"user-scalable=yes\"):\"no\"===lcUserScalable?content.push(\"user-scalable=no\"):console.error(\"userScalable=\"+JSON.stringify(userScalable)+\" is an unknown value\")}minimumScale&&content.push(\"minimum-scale=\"+minimumScale),maximumScale&&content.push(\"maximum-scale=\"+maximumScale),meta.setAttribute(\"content\",content.join(\", \"))}(window);";
